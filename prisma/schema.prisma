datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum Network {
  ETHEREUM
  BSC
  POLYGON
}

model Token {
  network          Network
  address          String
  decimals         Int                     @db.SmallInt
  symbol           String
  logoUri          String?
  usdPriceHistoric TokenUsdPriceHistoric[] @relation("TokenUsdPriceHistoric")
  createdAt        DateTime                @default(now())
  updatedAt        DateTime                @updatedAt

  @@id([network, address])
}

model TokenUsdPriceHistoric {
  tokenNetwork Network
  tokenAddress String
  token        Token    @relation("TokenUsdPriceHistoric", fields: [tokenNetwork, tokenAddress], references: [network, address])
  at           DateTime
  price        Decimal  @db.Decimal(65, 20)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@id([tokenNetwork, tokenAddress, at])
}
